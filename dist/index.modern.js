import e from"fecha";function t(e){const t=e.split(":").map(Number);return 3600*t[0]+60*t[1]+t[2]}const a=function(){try{(new Date).toLocaleDateString("i")}catch(e){return"RangeError"===e.name}return!1}()?(e,t)=>e.toLocaleDateString(t.language,{year:"numeric",month:"long",day:"numeric"}):t=>e.format(t,"mediumDate"),s=function(){try{(new Date).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}()?(e,t)=>e.toLocaleString(t.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}):t=>e.format(t,"haDateTime"),r=function(){try{(new Date).toLocaleTimeString("i")}catch(e){return"RangeError"===e.name}return!1}()?(e,t)=>e.toLocaleTimeString(t.language,{hour:"numeric",minute:"2-digit"}):t=>e.format(t,"shortTime"),n=[60,60,24,7],o=["second","minute","hour","day"];function i(e,t,a={}){let s=((a.compareTime||new Date).getTime()-e.getTime())/1e3;const r=!1===a.includeTense?"duration":(s>=0?"past":"future")+"_duration";let i;s=Math.abs(s);for(let e=0;e<n.length;e++){if(s<n[e]){s=Math.floor(s),i=t(`ui.components.relative_time.${r}.${o[e]}`,"count",s);break}s/=n[e]}return void 0===i&&(s=Math.floor(s),i=t(`ui.components.relative_time.${r}.week`,"count",s)),i}const c=e=>e<10?`0${e}`:e;function u(e){const t=Math.floor(e/3600),a=Math.floor(e%3600/60),s=Math.floor(e%3600%60);return t>0?`${t}:${c(a)}:${c(s)}`:a>0?`${a}:${c(s)}`:s>0?""+s:null}function l(e){let a=t(e.attributes.remaining);if("active"===e.state){const t=(new Date).getTime(),s=new Date(e.last_changed).getTime();a=Math.max(a-(t-s)/1e3,0)}return a}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}const m=(e,t,a,s=!1)=>{e._themes||(e._themes={});let r=t.default_theme;("default"===a||a&&t.themes[a])&&(r=a);const n=h({},e._themes);if("default"!==r){const a=t.themes[r];Object.keys(a).forEach(t=>{const s="--"+t;e._themes[s]="",n[s]=a[t]})}if(e.updateStyles?e.updateStyles(n):window.ShadyCSS&&window.ShadyCSS.styleSubtree(e,n),!s)return;const o=document.querySelector("meta[name=theme-color]");if(o){o.hasAttribute("default-content")||o.setAttribute("default-content",o.getAttribute("content"));const e=n["--primary-color"]||o.getAttribute("default-content");o.setAttribute("content",e)}},d=e=>"function"==typeof e.getCardSize?e.getCardSize():4;function p(e){return e.substr(0,e.indexOf("."))}function f(e){return e.substr(e.indexOf(".")+1)}function g(e){const t=e.locale.language||"en";return e.translationMetadata.translations[t]&&e.translationMetadata.translations[t].isRTL||!1}function b(e){return g(e)?"rtl":"ltr"}function _(e){return p(e.entity_id)}var y;!function(e){e.language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none"}(y||(y={}));const w=(e,t,a)=>{let s;switch(null==t?void 0:t.number_format){case y.comma_decimal:s=["en-US","en"];break;case y.decimal_comma:s=["de","es","it"];break;case y.space_comma:s=["fr","sv","cs"];break;case y.system:s=void 0;break;default:s=null==t?void 0:t.language}if(Number.isNaN=Number.isNaN||function e(t){return"number"==typeof t&&e(t)},!Number.isNaN(Number(e))&&Intl&&(null==t?void 0:t.number_format)!==y.none)try{return new Intl.NumberFormat(s,v(e,a)).format(Number(e))}catch(t){return console.error(t),new Intl.NumberFormat(void 0,v(e,a)).format(Number(e))}return e?e.toString():""},v=(e,t)=>{const a=t||{};if("string"!=typeof e)return a;if(!t||!t.minimumFractionDigits&&!t.maximumFractionDigits){const t=e.indexOf(".")>-1?e.split(".")[1].length:0;a.minimumFractionDigits=t,a.maximumFractionDigits=t}return a};function k(e,t,n,o){const i=void 0!==o?o:t.state;if("unknown"===i||"unavailable"===i)return e(`state.default.${i}`);if(t.attributes.unit_of_measurement)return`${w(i,n)} ${t.attributes.unit_of_measurement}`;const c=_(t);if("input_datetime"===c){let e;if(!t.attributes.has_time)return e=new Date(t.attributes.year,t.attributes.month-1,t.attributes.day),a(e,n);if(!t.attributes.has_date){const a=new Date;return e=new Date(a.getFullYear(),a.getMonth(),a.getDay(),t.attributes.hour,t.attributes.minute),r(e,n)}return e=new Date(t.attributes.year,t.attributes.month-1,t.attributes.day,t.attributes.hour,t.attributes.minute),s(e,n)}return"humidifier"===c&&"on"===i&&t.attributes.humidity?`${t.attributes.humidity} %`:"counter"===c||"number"===c?w(i,n):t.attributes.device_class&&e(`component.${c}.state.${t.attributes.device_class}.${t.state}`)||e(`component.${c}.state._.${t.state}`)||t.state}const S="hass:bookmark",x="lovelace",$=["climate","cover","configurator","input_select","input_number","input_text","lock","media_player","scene","script","timer","vacuum","water_heater","weblink"],D=["alarm_control_panel","automation","camera","climate","configurator","cover","fan","group","history_graph","input_datetime","light","lock","media_player","script","sun","updater","vacuum","water_heater","weather"],N=["input_number","input_select","input_text","scene","weblink"],T=["camera","configurator","history_graph","scene"],E=["closed","locked","off"],M=new Set(["fan","input_boolean","light","switch","group","automation"]),F="°C",q="°F",C="group.default_view",O=(e,t,a,s)=>{s=s||{},a=null==a?{}:a;const r=new Event(t,{bubbles:void 0===s.bubbles||s.bubbles,cancelable:Boolean(s.cancelable),composed:void 0===s.composed||s.composed});return r.detail=a,e.dispatchEvent(r),r},R=new Set(["call-service","divider","section","weblink","cast","select"]),A={alert:"toggle",automation:"toggle",climate:"climate",cover:"cover",fan:"toggle",group:"group",input_boolean:"toggle",input_number:"input-number",input_select:"input-select",input_text:"input-text",light:"toggle",lock:"lock",media_player:"media-player",remote:"toggle",scene:"scene",script:"script",sensor:"sensor",timer:"timer",switch:"toggle",vacuum:"toggle",water_heater:"climate",input_datetime:"input-datetime"},L=(e,t=!1)=>{const a=(e,t)=>s("hui-error-card",{type:"error",error:e,config:t}),s=(e,t)=>{const s=window.document.createElement(e);try{s.setConfig(t)}catch(s){return console.error(e,s),a(s.message,t)}return s};if(!e||"object"!=typeof e||!t&&!e.type)return a("No type defined",e);let r=e.type;if(r&&r.startsWith("custom:"))r=r.substr("custom:".length);else if(t)if(R.has(r))r=`hui-${r}-row`;else{if(!e.entity)return a("Invalid config given.",e);const t=e.entity.split(".",1)[0];r=`hui-${A[t]||"text"}-entity-row`}else r=`hui-${r}-card`;if(customElements.get(r))return s(r,e);const n=a(`Custom element doesn't exist: ${e.type}.`,e);n.style.display="None";const o=setTimeout(()=>{n.style.display=""},2e3);return customElements.whenDefined(e.type).then(()=>{clearTimeout(o),O(n,"ll-rebuild",{},n)}),n},I=(e,t,a=!1)=>{let s;return function(...r){const n=this,o=a&&!s;clearTimeout(s),s=setTimeout(()=>{s=null,a||e.apply(n,r)},t),o&&e.apply(n,r)}},j={alert:"hass:alert",automation:"hass:playlist-play",calendar:"hass:calendar",camera:"hass:video",climate:"hass:thermostat",configurator:"hass:settings",conversation:"hass:text-to-speech",device_tracker:"hass:account",fan:"hass:fan",group:"hass:google-circles-communities",history_graph:"hass:chart-line",homeassistant:"hass:home-assistant",homekit:"hass:home-automation",image_processing:"hass:image-filter-frames",input_boolean:"hass:drawing",input_datetime:"hass:calendar-clock",input_number:"hass:ray-vertex",input_select:"hass:format-list-bulleted",input_text:"hass:textbox",light:"hass:lightbulb",mailbox:"hass:mailbox",notify:"hass:comment-alert",person:"hass:account",plant:"hass:flower",proximity:"hass:apple-safari",remote:"hass:remote",scene:"hass:google-pages",script:"hass:file-document",sensor:"hass:eye",simple_alarm:"hass:bell",sun:"hass:white-balance-sunny",switch:"hass:flash",timer:"hass:timer",updater:"hass:cloud-upload",vacuum:"hass:robot-vacuum",water_heater:"hass:thermometer",weblink:"hass:open-in-new"};function z(e,t){if(e in j)return j[e];switch(e){case"alarm_control_panel":switch(t){case"armed_home":return"hass:bell-plus";case"armed_night":return"hass:bell-sleep";case"disarmed":return"hass:bell-outline";case"triggered":return"hass:bell-ring";default:return"hass:bell"}case"binary_sensor":return t&&"off"===t?"hass:radiobox-blank":"hass:checkbox-marked-circle";case"cover":return"closed"===t?"hass:window-closed":"hass:window-open";case"lock":return t&&"unlocked"===t?"hass:lock-open":"hass:lock";case"media_player":return t&&"off"!==t&&"idle"!==t?"hass:cast-connected":"hass:cast";case"zwave":switch(t){case"dead":return"hass:emoticon-dead";case"sleeping":return"hass:sleep";case"initializing":return"hass:timer-sand";default:return"hass:z-wave"}default:return console.warn("Unable to find icon for domain "+e+" ("+t+")"),"hass:bookmark"}}const U=(e,t)=>{const a=t.value||t,s=t.attribute?e.attributes[t.attribute]:e.state;switch(t.operator||"=="){case"==":return s===a;case"<=":return s<=a;case"<":return s<a;case">=":return s>=a;case">":return s>a;case"!=":return s!==a;case"regex":return s.match(a);default:return!1}},B=e=>{O(window,"haptic",e)},P=(e,t,a=!1)=>{a?history.replaceState(null,"",t):history.pushState(null,"",t),O(window,"location-changed",{replace:a})},V=(e,t,a=!0)=>{const s=p(t),r="group"===s?"homeassistant":s;let n;switch(s){case"lock":n=a?"unlock":"lock";break;case"cover":n=a?"open_cover":"close_cover";break;default:n=a?"turn_on":"turn_off"}return e.callService(r,n,{entity_id:t})},W=(e,t)=>{const a=E.includes(e.states[t].state);return V(e,t,a)},Y=(e,t,a,s)=>{if(s||(s={action:"more-info"}),!s.confirmation||s.confirmation.exemptions&&s.confirmation.exemptions.some(e=>e.user===t.user.id)||(B("warning"),confirm(s.confirmation.text||`Are you sure you want to ${s.action}?`)))switch(s.action){case"more-info":(a.entity||a.camera_image)&&O(e,"hass-more-info",{entityId:a.entity?a.entity:a.camera_image});break;case"navigate":s.navigation_path&&P(0,s.navigation_path);break;case"url":s.url_path&&window.open(s.url_path);break;case"toggle":a.entity&&(W(t,a.entity),B("success"));break;case"call-service":{if(!s.service)return void B("failure");const[e,a]=s.service.split(".",2);t.callService(e,a,s.service_data),B("success");break}case"fire-dom-event":O(e,"ll-custom",s)}},G=(e,t,a,s)=>{let r;"double_tap"===s&&a.double_tap_action?r=a.double_tap_action:"hold"===s&&a.hold_action?r=a.hold_action:"tap"===s&&a.tap_action&&(r=a.tap_action),Y(e,t,a,r)},H=(e,t,a,s,r)=>{let n;if(r&&a.double_tap_action?n=a.double_tap_action:s&&a.hold_action?n=a.hold_action:!s&&a.tap_action&&(n=a.tap_action),n||(n={action:"more-info"}),!n.confirmation||n.confirmation.exemptions&&n.confirmation.exemptions.some(e=>e.user===t.user.id)||confirm(n.confirmation.text||`Are you sure you want to ${n.action}?`))switch(n.action){case"more-info":(n.entity||a.entity||a.camera_image)&&(O(e,"hass-more-info",{entityId:n.entity?n.entity:a.entity?a.entity:a.camera_image}),n.haptic&&B(n.haptic));break;case"navigate":n.navigation_path&&(P(0,n.navigation_path),n.haptic&&B(n.haptic));break;case"url":n.url_path&&window.open(n.url_path),n.haptic&&B(n.haptic);break;case"toggle":a.entity&&(W(t,a.entity),n.haptic&&B(n.haptic));break;case"call-service":{if(!n.service)return;const[e,s]=n.service.split(".",2),r=h({},n.service_data);"entity"===r.entity_id&&(r.entity_id=a.entity),t.callService(e,s,r),n.haptic&&B(n.haptic);break}case"fire-dom-event":O(e,"ll-custom",n),n.haptic&&B(n.haptic)}};function J(e){return void 0!==e&&"none"!==e.action}function K(e,t,a){if(t.has("config")||a)return!0;if(e.config.entity){const a=t.get("hass");return!a||a.states[e.config.entity]!==e.hass.states[e.config.entity]}return!1}function Q(e){return void 0!==e&&"none"!==e.action}const X=(e,t,a=!0)=>{const s={};t.forEach(t=>{if(E.includes(e.states[t].state)===a){const e=p(t),a=["cover","lock"].includes(e)?e:"homeassistant";a in s||(s[a]=[]),s[a].push(t)}}),Object.keys(s).forEach(t=>{let r;switch(t){case"lock":r=a?"unlock":"lock";break;case"cover":r=a?"open_cover":"close_cover";break;default:r=a?"turn_on":"turn_off"}e.callService(t,r,{entity_id:s[t]})})},Z=()=>{let e=document.querySelector("home-assistant");if(e=e&&e.shadowRoot,e=e&&e.querySelector("home-assistant-main"),e=e&&e.shadowRoot,e=e&&e.querySelector("app-drawer-layout partial-panel-resolver"),e=e&&e.shadowRoot||e,e=e&&e.querySelector("ha-panel-lovelace"),e=e&&e.shadowRoot,e=e&&e.querySelector("hui-root"),e){const t=e.lovelace;return t.current_view=e.___curView,t}return null},ee={humidity:"hass:water-percent",illuminance:"hass:brightness-5",temperature:"hass:thermometer",pressure:"hass:gauge",power:"hass:flash",signal_strength:"hass:wifi"},te={binary_sensor:e=>{const t=e.state&&"off"===e.state;switch(e.attributes.device_class){case"battery":return t?"hass:battery":"hass:battery-outline";case"cold":return t?"hass:thermometer":"hass:snowflake";case"connectivity":return t?"hass:server-network-off":"hass:server-network";case"door":return t?"hass:door-closed":"hass:door-open";case"garage_door":return t?"hass:garage":"hass:garage-open";case"gas":case"power":case"problem":case"safety":case"smoke":return t?"hass:shield-check":"hass:alert";case"heat":return t?"hass:thermometer":"hass:fire";case"light":return t?"hass:brightness-5":"hass:brightness-7";case"lock":return t?"hass:lock":"hass:lock-open";case"moisture":return t?"hass:water-off":"hass:water";case"motion":return t?"hass:walk":"hass:run";case"occupancy":return t?"hass:home-outline":"hass:home";case"opening":return t?"hass:square":"hass:square-outline";case"plug":return t?"hass:power-plug-off":"hass:power-plug";case"presence":return t?"hass:home-outline":"hass:home";case"sound":return t?"hass:music-note-off":"hass:music-note";case"vibration":return t?"hass:crop-portrait":"hass:vibrate";case"window":return t?"hass:window-closed":"hass:window-open";default:return t?"hass:radiobox-blank":"hass:checkbox-marked-circle"}},cover:e=>{const t="closed"!==e.state;switch(e.attributes.device_class){case"garage":return t?"hass:garage-open":"hass:garage";case"door":return t?"hass:door-open":"hass:door-closed";case"shutter":return t?"hass:window-shutter-open":"hass:window-shutter";case"blind":return t?"hass:blinds-open":"hass:blinds";case"window":return t?"hass:window-open":"hass:window-closed";default:return z("cover",e.state)}},sensor:e=>{const t=e.attributes.device_class;if(t&&t in ee)return ee[t];if("battery"===t){const t=Number(e.state);if(isNaN(t))return"hass:battery-unknown";const a=10*Math.round(t/10);return a>=100?"hass:battery":a<=0?"hass:battery-alert":`hass:battery-${a}`}const a=e.attributes.unit_of_measurement;return"°C"===a||"°F"===a?"hass:thermometer":z("sensor")},input_datetime:e=>e.attributes.has_date?e.attributes.has_time?z("input_datetime"):"hass:calendar":"hass:clock"},ae=e=>{if(!e)return"hass:bookmark";if(e.attributes.icon)return e.attributes.icon;const t=p(e.entity_id);return t in te?te[t](e):z(t,e.state)};export{S as DEFAULT_DOMAIN_ICON,x as DEFAULT_PANEL,C as DEFAULT_VIEW_ENTITY_ID,N as DOMAINS_HIDE_MORE_INFO,T as DOMAINS_MORE_INFO_NO_HISTORY,M as DOMAINS_TOGGLE,$ as DOMAINS_WITH_CARD,D as DOMAINS_WITH_MORE_INFO,y as NumberFormat,E as STATES_OFF,F as UNIT_C,q as UNIT_F,m as applyThemesOnElement,d as computeCardSize,p as computeDomain,f as computeEntity,g as computeRTL,b as computeRTLDirection,k as computeStateDisplay,_ as computeStateDomain,L as createThing,I as debounce,z as domainIcon,t as durationToSeconds,U as evaluateFilter,O as fireEvent,j as fixedIcons,a as formatDate,s as formatDateTime,w as formatNumber,r as formatTime,B as forwardHaptic,Z as getLovelace,G as handleAction,Y as handleActionConfig,H as handleClick,J as hasAction,K as hasConfigOrEntityChanged,Q as hasDoubleClick,P as navigate,i as relativeTime,u as secondsToDuration,ae as stateIcon,l as timerTimeRemaining,W as toggleEntity,X as turnOnOffEntities,V as turnOnOffEntity};
//# sourceMappingURL=index.modern.js.map
